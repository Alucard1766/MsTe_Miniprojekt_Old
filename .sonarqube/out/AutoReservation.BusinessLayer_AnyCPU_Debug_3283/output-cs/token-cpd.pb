Ÿ
{D:\Projekte\GitHub\MsTe_Miniprojekt_old\MsTe_Miniprojekt_Old\AutoReservation.BusinessLayer\..\Assets\AssemblyInfo.Shared.cs
[ 
assembly 	
:	 

AssemblyCompany 
( 
$str C
)C D
]D E
[ 
assembly 	
:	 

AssemblyCopyright 
( 
$str W
)W X
]X Y
[ 
assembly 	
:	 

AssemblyTrademark 
( 
$str 
)  
]  !
[ 
assembly 	
:	 

AssemblyCulture 
( 
$str 
) 
] 
[ 
assembly 	
:	 

AssemblyVersion 
( 
$str '
)' (
]( )
[ 
assembly 	
:	 

AssemblyFileVersion 
( 
$str +
)+ ,
], -ë{
~D:\Projekte\GitHub\MsTe_Miniprojekt_old\MsTe_Miniprojekt_Old\AutoReservation.BusinessLayer\AutoReservationBusinessComponent.cs
	namespace 	
AutoReservation
 
. 
BusinessLayer '
{		 
public

 

class

 ,
 AutoReservationBusinessComponent

 1
{ 
public 
List 
< 
Auto 
> 
Autos 
{ 	
get 
{ 
using 
( 
var 
context "
=# $
new% ("
AutoReservationContext) ?
(? @
)@ A
)A B
{ 
return 
context "
." #
Autos# (
.( )
ToList) /
(/ 0
)0 1
;1 2
} 
} 
} 	
public 
List 
< 
Kunde 
> 
Kunden !
{ 	
get 
{ 
using 
( 
var 
context "
=# $
new% ("
AutoReservationContext) ?
(? @
)@ A
)A B
{ 
return 
context "
." #
Kunden# )
.) *
ToList* 0
(0 1
)1 2
;2 3
} 
} 
}   	
public"" 
List"" 
<"" 
Reservation"" 
>""  
Reservationen""! .
{## 	
get$$ 
{%% 
using&& 
(&& 
var&& 
context&& "
=&&# $
new&&% ("
AutoReservationContext&&) ?
(&&? @
)&&@ A
)&&A B
{'' 
return(( 
context(( "
.((" #
Reservationen((# 0
.((0 1
Include((1 8
(((8 9
$str((9 ?
)((? @
.((@ A
Include((A H
(((H I
$str((I P
)((P Q
.((Q R
ToList((R X
(((X Y
)((Y Z
;((Z [
})) 
}** 
}++ 	
public-- 
Auto-- 
GetAutoById-- 
(--  
int--  #
id--$ &
)--& '
{.. 	
using// 
(// 
var// 
context// 
=//  
new//! $"
AutoReservationContext//% ;
(//; <
)//< =
)//= >
{00 
return11 
context11 
.11 
Autos11 $
.11$ %
FirstOrDefault11% 3
(113 4
a114 5
=>116 8
a119 :
.11: ;
Id11; =
==11> @
id11A C
)11C D
;11D E
}22 
}33 	
public55 
Kunde55 
GetKundeById55 !
(55! "
int55" %
id55& (
)55( )
{66 	
using77 
(77 
var77 
context77 
=77  
new77! $"
AutoReservationContext77% ;
(77; <
)77< =
)77= >
{88 
return99 
context99 
.99 
Kunden99 %
.99% &
FirstOrDefault99& 4
(994 5
k995 6
=>997 9
k99: ;
.99; <
Id99< >
==99? A
id99B D
)99D E
;99E F
}:: 
};; 	
public== 
Reservation== 
GetReservationByNr== -
(==- .
int==. 1
id==2 4
)==4 5
{>> 	
using?? 
(?? 
var?? 
context?? 
=??  
new??! $"
AutoReservationContext??% ;
(??; <
)??< =
)??= >
{@@ 
returnAA 
contextAA 
.AA 
ReservationenAA ,
.AA, -
IncludeAA- 4
(AA4 5
$strAA5 ;
)AA; <
.AA< =
IncludeAA= D
(AAD E
$strAAE L
)AAL M
.AAM N
FirstOrDefaultAAN \
(AA\ ]
rAA] ^
=>AA_ a
rAAb c
.AAc d
ReservationsNrAAd r
==AAs u
idAAv x
)AAx y
;AAy z
}BB 
}CC 	
publicEE 
AutoEE 

InsertAutoEE 
(EE 
AutoEE #
autoEE$ (
)EE( )
{FF 	
usingGG 
(GG 
varGG 
contextGG 
=GG  
newGG! $"
AutoReservationContextGG% ;
(GG; <
)GG< =
)GG= >
{HH 
contextII 
.II 
AutosII 
.II 
AddII !
(II! "
autoII" &
)II& '
;II' (
contextJJ 
.JJ 
EntryJJ 
(JJ 
autoJJ "
)JJ" #
.JJ# $
StateJJ$ )
=JJ* +
EntityStateJJ, 7
.JJ7 8
AddedJJ8 =
;JJ= >
contextKK 
.KK 
SaveChangesKK #
(KK# $
)KK$ %
;KK% &
}LL 
returnMM 
autoMM 
;MM 
}NN 	
publicPP 
KundePP 
InsertKundePP  
(PP  !
KundePP! &
kundePP' ,
)PP, -
{QQ 	
usingRR 
(RR 
varRR 
contextRR 
=RR  
newRR! $"
AutoReservationContextRR% ;
(RR; <
)RR< =
)RR= >
{SS 
contextTT 
.TT 
KundenTT 
.TT 
AddTT "
(TT" #
kundeTT# (
)TT( )
;TT) *
contextUU 
.UU 
EntryUU 
(UU 
kundeUU #
)UU# $
.UU$ %
StateUU% *
=UU+ ,
EntityStateUU- 8
.UU8 9
AddedUU9 >
;UU> ?
contextVV 
.VV 
SaveChangesVV #
(VV# $
)VV$ %
;VV% &
}WW 
returnXX 
kundeXX 
;XX 
}YY 	
public[[ 
Reservation[[ 
InsertReservation[[ ,
([[, -
Reservation[[- 8
reservation[[9 D
)[[D E
{\\ 	
using]] 
(]] 
var]] 
context]] 
=]]  
new]]! $"
AutoReservationContext]]% ;
(]]; <
)]]< =
)]]= >
{^^ 
context__ 
.__ 
Reservationen__ %
.__% &
Add__& )
(__) *
reservation__* 5
)__5 6
;__6 7
context`` 
.`` 
Entry`` 
(`` 
reservation`` )
)``) *
.``* +
State``+ 0
=``1 2
EntityState``3 >
.``> ?
Added``? D
;``D E
contextaa 
.aa 
SaveChangesaa #
(aa# $
)aa$ %
;aa% &
}bb 
returncc 
reservationcc 
;cc 
}dd 	
publichh 
Autohh 

UpdateAutohh 
(hh 
Autohh #
autohh$ (
)hh( )
{ii 	
usingjj 
(jj 
varjj 
contextjj 
=jj  
newjj! $"
AutoReservationContextjj% ;
(jj; <
)jj< =
)jj= >
{kk 
tryll 
{mm 
contextnn 
.nn 
Autosnn !
.nn! "
Attachnn" (
(nn( )
autonn) -
)nn- .
;nn. /
contextoo 
.oo 
Entryoo !
(oo! "
autooo" &
)oo& '
.oo' (
Stateoo( -
=oo. /
EntityStateoo0 ;
.oo; <
Modifiedoo< D
;ooD E
contextpp 
.pp 
SaveChangespp '
(pp' (
)pp( )
;pp) *
returnqq 
autoqq 
;qq  
}rr 
catchss 
(ss (
DbUpdateConcurrencyExceptionss 3
)ss3 4
{tt 
throwuu 5
)CreateLocalOptimisticConcurrencyExceptionuu C
(uuC D
contextuuD K
,uuK L
autouuM Q
)uuQ R
;uuR S
}vv 
}ww 
}xx 	
publiczz 
Kundezz 
UpdateKundezz  
(zz  !
Kundezz! &
kundezz' ,
)zz, -
{{{ 	
using|| 
(|| 
var|| 
context|| 
=||  
new||! $"
AutoReservationContext||% ;
(||; <
)||< =
)||= >
{}} 
try~~ 
{ 
context
ÄÄ 
.
ÄÄ 
Kunden
ÄÄ "
.
ÄÄ" #
Attach
ÄÄ# )
(
ÄÄ) *
kunde
ÄÄ* /
)
ÄÄ/ 0
;
ÄÄ0 1
context
ÅÅ 
.
ÅÅ 
Entry
ÅÅ !
(
ÅÅ! "
kunde
ÅÅ" '
)
ÅÅ' (
.
ÅÅ( )
State
ÅÅ) .
=
ÅÅ/ 0
EntityState
ÅÅ1 <
.
ÅÅ< =
Modified
ÅÅ= E
;
ÅÅE F
context
ÇÇ 
.
ÇÇ 
SaveChanges
ÇÇ '
(
ÇÇ' (
)
ÇÇ( )
;
ÇÇ) *
return
ÉÉ 
kunde
ÉÉ  
;
ÉÉ  !
}
ÑÑ 
catch
ÖÖ 
(
ÖÖ *
DbUpdateConcurrencyException
ÖÖ 3
)
ÖÖ3 4
{
ÜÜ 
throw
áá 7
)CreateLocalOptimisticConcurrencyException
áá C
(
ááC D
context
ááD K
,
ááK L
kunde
ááM R
)
ááR S
;
ááS T
}
àà 
}
ââ 
}
ää 	
public
åå 
Reservation
åå 
UpdateReservation
åå ,
(
åå, -
Reservation
åå- 8
reservation
åå9 D
)
ååD E
{
çç 	
using
éé 
(
éé 
var
éé 
context
éé 
=
éé  
new
éé! $$
AutoReservationContext
éé% ;
(
éé; <
)
éé< =
)
éé= >
{
èè 
try
êê 
{
ëë 
context
íí 
.
íí 
Reservationen
íí )
.
íí) *
Attach
íí* 0
(
íí0 1
reservation
íí1 <
)
íí< =
;
íí= >
context
ìì 
.
ìì 
Entry
ìì !
(
ìì! "
reservation
ìì" -
)
ìì- .
.
ìì. /
State
ìì/ 4
=
ìì5 6
EntityState
ìì7 B
.
ììB C
Modified
ììC K
;
ììK L
context
îî 
.
îî 
Entry
îî !
(
îî! "
reservation
îî" -
)
îî- .
.
îî. /
	Reference
îî/ 8
(
îî8 9
r
îî9 :
=>
îî; =
r
îî> ?
.
îî? @
Auto
îî@ D
)
îîD E
.
îîE F
Load
îîF J
(
îîJ K
)
îîK L
;
îîL M
context
ïï 
.
ïï 
Entry
ïï !
(
ïï! "
reservation
ïï" -
)
ïï- .
.
ïï. /
	Reference
ïï/ 8
(
ïï8 9
r
ïï9 :
=>
ïï; =
r
ïï> ?
.
ïï? @
Kunde
ïï@ E
)
ïïE F
.
ïïF G
Load
ïïG K
(
ïïK L
)
ïïL M
;
ïïM N
context
ññ 
.
ññ 
SaveChanges
ññ '
(
ññ' (
)
ññ( )
;
ññ) *
return
óó 
reservation
óó &
;
óó& '
}
òò 
catch
ôô 
(
ôô *
DbUpdateConcurrencyException
ôô 3
)
ôô3 4
{
öö 
throw
õõ 7
)CreateLocalOptimisticConcurrencyException
õõ C
(
õõC D
context
õõD K
,
õõK L
reservation
õõM X
)
õõX Y
;
õõY Z
}
úú 
}
ûû 
}
üü 	
public
°° 
void
°° 

DeleteAuto
°° 
(
°° 
Auto
°° #
auto
°°$ (
)
°°( )
{
¢¢ 	
using
££ 
(
££ 
var
££ 
context
££ 
=
££  
new
££! $$
AutoReservationContext
££% ;
(
££; <
)
££< =
)
££= >
{
§§ 
context
•• 
.
•• 
Entry
•• 
(
•• 
auto
•• "
)
••" #
.
••# $
State
••$ )
=
••* +
EntityState
••, 7
.
••7 8
Deleted
••8 ?
;
••? @
context
¶¶ 
.
¶¶ 
SaveChanges
¶¶ #
(
¶¶# $
)
¶¶$ %
;
¶¶% &
}
ßß 
}
®® 	
public
™™ 
void
™™ 
DeleteKunde
™™ 
(
™™  
Kunde
™™  %
kunde
™™& +
)
™™+ ,
{
´´ 	
using
¨¨ 
(
¨¨ 
var
¨¨ 
context
¨¨ 
=
¨¨  
new
¨¨! $$
AutoReservationContext
¨¨% ;
(
¨¨; <
)
¨¨< =
)
¨¨= >
{
≠≠ 
context
ÆÆ 
.
ÆÆ 
Entry
ÆÆ 
(
ÆÆ 
kunde
ÆÆ #
)
ÆÆ# $
.
ÆÆ$ %
State
ÆÆ% *
=
ÆÆ+ ,
EntityState
ÆÆ- 8
.
ÆÆ8 9
Deleted
ÆÆ9 @
;
ÆÆ@ A
context
ØØ 
.
ØØ 
SaveChanges
ØØ #
(
ØØ# $
)
ØØ$ %
;
ØØ% &
}
∞∞ 
}
±± 	
public
≥≥ 
void
≥≥ 
DeleteReservation
≥≥ %
(
≥≥% &
Reservation
≥≥& 1
reservation
≥≥2 =
)
≥≥= >
{
¥¥ 	
using
µµ 
(
µµ 
var
µµ 
context
µµ 
=
µµ  
new
µµ! $$
AutoReservationContext
µµ% ;
(
µµ; <
)
µµ< =
)
µµ= >
{
∂∂ 
context
∑∑ 
.
∑∑ 
Entry
∑∑ 
(
∑∑ 
reservation
∑∑ )
)
∑∑) *
.
∑∑* +
State
∑∑+ 0
=
∑∑1 2
EntityState
∑∑3 >
.
∑∑> ?
Deleted
∑∑? F
;
∑∑F G
context
∏∏ 
.
∏∏ 
SaveChanges
∏∏ #
(
∏∏# $
)
∏∏$ %
;
∏∏% &
}
ππ 
}
∫∫ 	
private
ºº 
static
ºº 1
#LocalOptimisticConcurrencyException
ºº :
<
ºº: ;
T
ºº; <
>
ºº< =7
)CreateLocalOptimisticConcurrencyException
ºº> g
<
ººg h
T
ººh i
>
ººi j
(
ººj k%
AutoReservationContextººk Å
contextººÇ â
,ººâ ä
Tººã å
entityººç ì
)ººì î
where
ΩΩ 
T
ΩΩ 
:
ΩΩ 
class
ΩΩ 
{
ææ 	
var
øø 
dbEntity
øø 
=
øø 
(
øø 
T
øø 
)
øø 
context
øø %
.
øø% &
Entry
øø& +
(
øø+ ,
entity
øø, 2
)
øø2 3
.
¿¿ 
GetDatabaseValues
¿¿ "
(
¿¿" #
)
¿¿# $
.
¡¡ 
ToObject
¡¡ 
(
¡¡ 
)
¡¡ 
;
¡¡ 
return
√√ 
new
√√ 1
#LocalOptimisticConcurrencyException
√√ :
<
√√: ;
T
√√; <
>
√√< =
(
√√= >
$"
√√> @
Update 
√√@ G
{
√√G H
typeof
√√H N
(
√√N O
Auto
√√O S
)
√√S T
.
√√T U
Name
√√U Y
}
√√Y Z"
: Concurrency-Fehler
√√Z n
"
√√n o
,
√√o p
dbEntity
√√q y
)
√√y z
;
√√z {
}
ƒƒ 	
}
≈≈ 
}∆∆ ‰	
ÅD:\Projekte\GitHub\MsTe_Miniprojekt_old\MsTe_Miniprojekt_Old\AutoReservation.BusinessLayer\LocalOptimisticConcurrencyException.cs
	namespace 	
AutoReservation
 
. 
BusinessLayer '
{ 
public 

class /
#LocalOptimisticConcurrencyException 4
<4 5
T5 6
>6 7
:8 9
	Exception: C
{ 
public /
#LocalOptimisticConcurrencyException 2
(2 3
string3 9
message: A
)A B
:C D
baseE I
(I J
messageJ Q
)Q R
{S T
}U V
public /
#LocalOptimisticConcurrencyException 2
(2 3
string3 9
message: A
,A B
TC D
mergedEntityE Q
)Q R
:S T
baseU Y
(Y Z
messageZ a
)a b
{		 	
MergedEntity

 
=

 
mergedEntity

 '
;

' (
} 	
public 
T 
MergedEntity 
{ 
get  #
;# $
set% (
;( )
}* +
} 
} ƒ
uD:\Projekte\GitHub\MsTe_Miniprojekt_old\MsTe_Miniprojekt_Old\AutoReservation.BusinessLayer\Properties\AssemblyInfo.cs
[ 
assembly 	
:	 

AssemblyTitle 
( 
$str 8
)8 9
]9 :
[ 
assembly 	
:	 

AssemblyDescription 
( 
$str !
)! "
]" #
[		 
assembly		 	
:			 
!
AssemblyConfiguration		  
(		  !
$str		! #
)		# $
]		$ %
[

 
assembly

 	
:

	 

AssemblyProduct

 
(

 
$str

 :
)

: ;
]

; <
[ 
assembly 	
:	 


ComVisible 
( 
false 
) 
] 
[ 
assembly 	
:	 

Guid 
( 
$str 6
)6 7
]7 8